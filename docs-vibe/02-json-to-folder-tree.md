# JSON to Folder Tree Script

## User Intent

The user wants a Python script that rebuilds the tree structure of a folder based on a JSON file generated by `gather_tree.py`. The script should utilize dataclass to define every data it encountered unless it has only one attribute.

## Implementation Details

### Purpose

The `rebuild_tree.py` script reads a JSON file generated by `gather_tree.py` and recreates the folder tree structure on the filesystem. The script creates empty files and directories matching the structure stored in the JSON file.

### Usage

```bash
python scripts/rebuild_tree.py <json_path> <target_path>
```

**Arguments:**
- `json_path`: Path to JSON file generated by `gather_tree.py` (required)
- `target_path`: Directory where the tree structure should be rebuilt (required)

**Example:**
```bash
python scripts/rebuild_tree.py tree_structure.json /tmp/rebuild
```

This will create the root directory (with the name from the JSON) inside `/tmp/rebuild`.

### Data Structures

The script uses the following data structures:

- **FileNode**: Represents a file with `name` and `type` attributes. Uses a dataclass.
- **DirectoryNode**: Represents a directory with `name`, `type`, and `children` attributes. Uses a dataclass.
- **TreeStructure**: Root structure containing the tree data. Uses a dataclass.

### Features

- Reads JSON files generated by `gather_tree.py`
- Recreates directory structure recursively
- Creates empty files matching the original structure
- Fail-fast error handling: raises error immediately if any path already exists
- Command-line interface with required arguments
- Logging to both console and file
- Progress bar (tqdm) for large trees (>100 nodes)
- Concise execution report after completion
- Validates JSON structure before processing

### JSON Input Format

The script expects JSON files in the format generated by `gather_tree.py`:

```json
{
  "root": {
    "name": "folder_name",
    "type": "folder",
    "children": [
      {
        "name": "file.txt",
        "type": "file"
      },
      {
        "name": "subdirectory",
        "type": "folder",
        "children": [
          {
            "name": "nested_file.txt",
            "type": "file"
          }
        ]
      }
    ]
  }
}
```

### Error Handling

The script implements fail-fast error handling:

- **FileNotFoundError**: If the JSON file does not exist
- **ValueError**: If the JSON structure is invalid or target path is invalid
- **FileExistsError**: If any file or directory already exists at the target location (fail-fast)
- **OSError**: If filesystem operations fail (permissions, disk space, etc.)

### Implementation Status

Script implementation completed. The script successfully:
- Loads and parses JSON files into dataclass instances
- Rebuilds directory structures recursively
- Creates empty files matching the original structure
- Provides fail-fast error handling for conflicts
- Provides logging and execution reports
- Handles large trees with progress bars

